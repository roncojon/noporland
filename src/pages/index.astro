---
import Layout from "../layouts/Layout.astro";
import SearchWithQueryProvider from "../components/Search/SearchWithQueryProvider";
import SiteIcon from "../components/SiteIcon.astro";
import { fetchVideosData } from "../services/awsServices";

// export const prerender = false;
const initialVideosRenderedInServer = await fetchVideosData({
  bringTags: true,
  elementsPerPage: 20, // Fetch the first page
  page: 1,
});

const tags: string[] | any = initialVideosRenderedInServer?.tags;
---

<Layout title="Welcome to NoporLand - Free Uncensored Hentai Videos">
  <main>
    <SiteIcon />
    <h1 class=" text-[1.38rem] sm:text-2xl mt-1 mb-4">Welcome to <span class="text-gradient ">NoporLand</span> â€“ Your Home for Free Uncensored Hentai Videos</h1>
    <header class="instructions text-xl">
      Have fun exploring <code>uncensored HD hentai</code>, <code>MILFs</code>,
      and more <code>adult content</code>. The best part? It's all <strong>Free</strong>.
    </header>

    <!-- <div class=" w-[800px]">
		<iframe src="https://es.pornhub.com/embed/66298b36e9dcf" frameborder="0" allowfullscreen width="100%"/>
	</div> -->

    <SearchWithQueryProvider
      initialVideos={initialVideosRenderedInServer}
      tags={tags?.sort((a, b) => a.localeCompare(b))}
      client:load
    />
  </main>
  <div
    class="w-full min-h-[100px] flex flex-col 2xl:!flex-row justify-center items-center gap-1 overflow-hidden mb-4"
  >
    <div class="hidden w-full sm:flex justify-center">
      <ins class="eas6a97888e2" data-zoneid="5434922"></ins>
    </div>

    <div class="w-full hidden 2xl:flex justify-center">
      <ins class="eas6a97888e2" data-zoneid="5434934"></ins>
    </div>

    <div class="w-full flex justify-center sm:hidden">
      <ins class="eas6a97888e10" data-zoneid="5435024"></ins>
    </div>
  </div>

  <!-- <script type="application/javascript">
    pn_idzone = 5435138;
    pn_sleep_seconds = 60;
    pn_is_self_hosted = 0;
    pn_soft_ask = 1;
    pn_filename = "/worker.js";
    pn_soft_ask_horizontal_position = "center";
    pn_soft_ask_vertical_position = "middle";
    pn_soft_ask_title_enabled = 0;
    pn_soft_ask_description = "Would you like to receive great special offers &amp; promotions?";
    pn_soft_ask_yes = "ALLOW";
    pn_soft_ask_no = "NO, THANKS"; 
</script> -->

  <!-- <script defer type="application/javascript" src="https://js.wpnsrv.com/pn.php"></script> -->
</Layout>

<!-- Add client-side script to handle pagination -->
<!-- <script src="../scripts/pagination.js" ></script> -->

<style>
  main {
    margin: auto;
    padding: 1rem;
    /* width: 800px; */
    max-width: calc(100% - 60px);
    min-height: calc(100dvh - 82px);
    color: white;
    font-size: 20px;
    line-height: 1.6;
  }
  .astro-a {
    position: absolute;
    top: -4px;
    left: 160px;
    transform: translatex(-50%);
    width: 220px;
    height: auto;
    z-index: -1;
    filter: brightness(50%) blur(4px);
    opacity: 0.6;
  }
  h1 {
    /* font-size: 2rem; */
    font-weight: 700;
    line-height: 1;
    text-align: center;
    text-shadow: 2px 2px 14px #25082d;
  }

  .text-gradient {
    background-image: linear-gradient(
      10deg,
      rgba(224, 204, 250, 0.8),
      /* Lighter version of accent-light */ rgba(96, 38, 174, 0.8) 30%,
      /* Lighter version of accent */ rgba(224, 204, 250, 0.4) 90%
        /* Much lighter at the end */
    );
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-size: 800%;
    background-position: 0%;
  }

  .instructions {
    margin-bottom: 1rem;
    border: 1px solid rgba(var(--accent-light), 25%);
    background: linear-gradient(
      rgba(var(--accent-dark), 66%),
      rgba(var(--accent-dark), 33%)
    );
    padding: 1rem;
    border-radius: 8px;
  }
  .instructions code {
    font-size: 0.8em;
    font-weight: bold;
    background: rgba(var(--accent-light), 12%);
    color: rgb(var(--accent-light));
    border-radius: 4px;
    padding: 0.3em 0.4em;
  }
  .instructions strong {
    color: rgb(var(--accent-light));
  }
  .link-card-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 0.5fr));

    gap: 0.5rem;
    padding: 0;
  }

  @media (max-width: 768px) {
    main {
      max-width: none;
    }
    .link-card-grid {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    }
  }

  .load-more-btn {
    display: block;
    margin: 2rem auto;
    padding: 0.75rem 1.5rem;
    background-color: #9632a8;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
  }

  .load-more-btn:hover {
    background-color: #b340ca;
  }

  .no-more-videos {
    text-align: center;
    margin: 2rem 0;
  }
</style>
